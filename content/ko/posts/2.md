+++
title = '파이썬으로 책쓰기'
date = 2024-04-08T22:03:30-04:00
draft = true
+++

## Motivation
![[Screenshot 2024-04-09 at 4.17.42 PM.png]]

학교에서 OS 수업을 듣고 있었는데, 앞자리에 앉은 인도 학생이 수업은 안 듣고 유튜브 동영상을 보며 무언가 열심히 하고 있었다. 알고 보니 요즘 유행하는 AI 부업 같은 거였다. [미드저니](https://www.midjourney.com/home)같은 이미지 생성 서비스를 이용해 유아용 색칠공부 책이나 공책 따위를 만들어서, [Etsy](https://www.etsy.com)같은 오픈 마켓 사이트에 파는 것 말이다. 

이 광경을 보고 나는... 나도 뭔가 해야만 할 것 같은 기분을 느꼈다. 근데 나름 전직 NLP 엔지니어로써 너무 뻔하게 "AI 티"가 나는 디지털 제품 말고, 사람이 하는 일을 완전히 대체한, 사람이 만든 것 처럼 보이는 AI Product를 만들고 싶었다. 그래서 단어책을 만들기로 했다.

사람이 직접 하는것과 별반 차이가 없을 domain이 무엇이 있을까 생각하다가, 한글을 배우는 외국인을 위한 한글 단어책을 만들기로 했다. 나는 아직 오픈소스 AI의 텍스트 생성 성능을 믿지 못하며, scalable하게 제품으로 판매하기 위해서는 완벽에 가까운 결과물이 필요하다고 생각하기에, LLM을 텍스트 생성이 아닌 기획, 텍스트 가공 및 관련 라이브러리 탐색 과정에만 이용했다.

## 1. 한글 단어 DB 만들기
가장 먼저 해야 하는 일은 단어장을 만드는 일이었다. 가장 먼저 기존의 단어장들을 살펴보았다. 생각보다 대부분 퀄리티가 좋았고, 베스트셀러와 유령 제품들을 비교해 보면 컨텐츠의 차이는 미비했지만, 그냥 브랜드가 유명한 브랜드인 경우가 많았다. 하지만 이런 내용 외적인 요소들은 차치하고, 내가 공부해 본 경험 및 기존 베스트셀러 단어책들을 분석해 봤을 때 반드시 필요한 내용들은 다음과 같았다.

>1. 단어: 생각보다 찾는 과정이 간단하지 않았다. 초보자가 배움직한 단어여만 하며, 나름대로의 분류 기준도 필요했다. 이렇게 체계적으로 정리된 단어의 모음은 당연히 사람의 손을 탔고, 이미 저작권에 구속되어 있는 경우가 많았다. Scalable하게 (내가 하나하나 단어를 선별하는 과정이 없도록), 저작권 없는, 초보자용 단어 모음을 긁어올 수 있어올 수 있을 만한 소스가 필요했다.
>2. 발음 기호: 한국어 발음 규칙을 수기로 입력해서 변환 코드를 짜는 선택지도 있었으나, 공부하기도 번거롭고 실수할 가능성도 있어서 그냥 이미 존재하는 웹 서비스들을 비교해 보고 가장 나은 것을 크롤링했다.
>3. 품사 및 정의: 대부분의 소스에 이미 포함되어 있어서 큰 어려움은 없었다. 다만, 정의가 아주 많거나, 품사가 아주 다양한 단어들이 몇 있어서, 이러한 케이스들에 대한 예외 처리를 진행해야 했다.
>4. 예문: 나는 한글과 영어 예문을 동시에 원했다. 처음 배우는 사람의 입장에서는 예문이 정의만큼이나 중요하다고 생각했기 때문에, 둘 중 하나의 언어로만 예문이 존재하는 소스의 경우 나머지 하나는 통역해서라도 첨부할 생각이었다. 다만 이렇게 "믿을 수 없는" 항목이 모이면 낮은 퀄리티의, 누가 봐도 AI로 찍어낸 자료가 된다고 생각해서, 되도록이면 하고 싶지 않았다.


![[Screenshot 2024-04-09 at 4.32.31 PM.png]]
다행히 1, 3, 4번 조건을 만족하는 소스로 국립국어원에서 제공하는 [한국어 기초사전](https://krdict.korean.go.kr)이 있었다. 저작권이 없었고, 내가 따로 크롤링 할 필요도 없이 자료도 `json` 형식으로 다운로드가 가능했다. 다만 nested json형식이 조금 난해해서 내가 필요한 항목만 뽑아서 1차원 csv 형식으로 가공했다. 

국립국어원에서 제공하는 어느 정도 퀄리티가 보증된 자료이고, 나 말고도 자연어 모델 학습에 사용하는 사람들이 있을것 같아서, 파싱 코드를 정돈 및 문서화해서 [깃허브](https://github.com/binjang/NIKL-dictionary-parser)에 공유하고, 가공된 데이터 역시 [허깅페이스에 데이터셋](https://huggingface.co/datasets/binjang/NIKL-korean-english-dictionary)으로 업로드했다. 처음으로 허깅페이스에 데이터셋도 업로드 해보고, 좋아요도 받아서 뿌듯했다.

원본 데이터에는 53,000여개의 단어가 있었으나, 초급자용 단어로 태그되어 있는 